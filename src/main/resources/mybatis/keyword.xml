<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dev.mvc.keyword.KeywordMapper">

    <!-- 특정 회원의 검색 키워드 조회 -->
    <select id="getKeywordsByMember" parameterType="int" resultType="map">
        SELECT keyno, searchkey, searchcnt, searchdate, interkey
        FROM keyword
        WHERE memberno = #{memberno}
        ORDER BY searchdate DESC;
    </select>

    <!-- 검색 키워드 삽입 -->
    <insert id="insertKeyword" parameterType="map">
        INSERT INTO keyword (keyno, searchkey, searchcnt, searchdate, interkey, memberno)
        VALUES (keyword_seq.NEXTVAL, #{searchkey}, #{searchcnt}, #{searchdate}, #{interkey}, #{memberno});
    </insert>

    <!-- 검색 키워드 수정 -->
    <update id="updateKeyword" parameterType="map">
        UPDATE keyword
        SET searchkey = #{searchkey},
            searchcnt = #{searchcnt},
            searchdate = #{searchdate},
            interkey = #{interkey}
        WHERE keyno = #{keyno};
    </update>

    <!-- 검색 키워드 삭제 -->
    <delete id="deleteKeyword" parameterType="int">
        DELETE FROM keyword
        WHERE keyno = #{keyno};
    </delete>

</mapper>
